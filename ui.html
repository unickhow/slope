<div id="app">
  <h2>Start from</h2>
  <div class="form-group">
    <label for="prefix">Prefix</label>
    <input type="text" id="prefix" placeholder="B">
  </div>
  <div class="form-group">
    <label for="base-number">Base Number</label>
    <input
      id="base-number"
      type="text"
      placeholder="505">
  </div>
  <select name="order" id="order">
    <option value="asc" selected>Asc</option>
    <option value="desc">Desc</option>
  </select>
  <button id="generate" disabled>Generate</button>
  <button id="cancel">Cancel</button>
</div>
<script>
let isAllowGenerate = false

function checkSubmitAvailable () {
  const baseNumberText = document.getElementById('base-number').value.trim()

  isAllowGenerate = !!baseNumberText

  document.getElementById('generate').disabled = !isAllowGenerate
}

document.getElementById('prefix').oninput = (e) => {
  checkSubmitAvailable()
}

document.getElementById('base-number').oninput = (e) => {
  e.target.value = e.target.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');
  checkSubmitAvailable()
}

document.getElementById('generate').onclick = () => {
  const prefix = document.getElementById('prefix').value;
  const baseNumber = document.getElementById('base-number').value;
  const order = document.getElementById('order').value;
  parent.postMessage({
    pluginMessage: {
      type: 'generate',
      prefix,
      baseNumber,
      order
    }
  }, '*')
}

document.getElementById('cancel').onclick = () => {
  parent.postMessage({ pluginMessage: { type: 'cancel' } }, '*')
}

</script>

<style>
  h2 {
    color: red;
  }
</style>
